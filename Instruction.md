# Гайд: Как навсегда сменить версию Python по умолчанию (Windows)

Эта инструкция поможет установить конкретную версию Python (например, 3.12) главной в системе, чтобы команда `python` запускала именно её.

## Шаг 1: Проверить установленные версии

Перед началом посмотрите, какие версии уже есть и где они находятся.
В PowerShell выполните:

```powershell
py --list-paths
```

Если нужной версии (например, `3.12`) нет в списке или путь к ней ведет в несуществующую папку — переходите к **Шагу 2**.
Если версия есть и работает — переходите к **Шагу 3**.

## Шаг 2: Установка или восстановление Python

Самый надежный способ установить свежую версию — через `winget` (официальный установщик пакетов Windows).

Для Python 3.12:
```powershell
winget install -e --id Python.Python.3.12
```

После установки снова проверьте пути командой `py --list-paths`, чтобы убедиться, что он появился.

## Шаг 3: Фиксация версии (Настройка переменных среды)

Чтобы Windows запомнила выбор навсегда, нужно изменить переменную `PATH`. Мы сделаем так, чтобы папка с нужной версией стояла **первой** в списке.

Выполните этот скрипт в PowerShell.
**Важно:** Замените `3.12` на вашу версию, если она другая.

```powershell
# 1. Получаем текущие пути
$p = [Environment]::GetEnvironmentVariable("Path", "User")

# 2. Удаляем старые упоминания этой версии (чтобы не дублировать)
# (В данном случае чистим пути к Python 3.12, чтобы вставить их заново в начало)
$p = $p -replace 'C:\\Users\\.*\\AppData\\Local\\Programs\\Python\\Python312\\?[^;]*;?', ''

# 3. Формируем новый список путей, ставя 3.12 в самое начало
# ВНИМАНИЕ: Проверьте, что путь C:\Users\$env:USERNAME\... совпадает с тем, что выдал py --list-paths
$targetVersionPath = "C:\Users\$env:USERNAME\AppData\Local\Programs\Python\Python312\"
$targetScriptsPath = "C:\Users\$env:USERNAME\AppData\Local\Programs\Python\Python312\Scripts\"

$newValue = "$targetVersionPath;$targetScriptsPath;" + $p

# 4. Сохраняем изменения навсегда
[Environment]::SetEnvironmentVariable("Path", $newValue, "User")

Write-Host "Готово! Версия Python 3.12 установлена как основная."
```

## Шаг 4: Проверка

1.  **Перезапустите терминал** (закройте и откройте заново).
2.  Проверьте версию:

```powershell
python --version
```

Должно вывести: `Python 3.12.x`.
